# Refactoring 2nd (Martin Fowler)
- **기간 : 2025.01 ~**
- **목표 : 리팩터링 2판을 읽고 정리한다.**

## CHAPTER 01 리팩터링: 첫 번째 예시
* * *
>프로그램이 잘 작동하는 상황에서 그저 코드가 '지저분하다'는 이유로 불평하는 것은 프로그램의 구조를 너무 미적인 기준으로만 
> 판단하는 건 아닐까? 컴파일러는 코드가 깔끔하든 지저분하든 개의치 않으니 말이다. 하지만 그 코드를 수정하려면 사람이 
> 개입되고, 사람은 코드의 미적 상태에 민감하다. 설계가 나쁜 시스템은 수정하기 어렵다. 원하는 동작을 수행하기 위해 
> 수정해야할 부분을 찾고, 기존 코드와 잘 맞물려 작동하게 할 방법을 강구하기가 어렵기 때문이다. 무엇을 수정할지 찾기 
> 어렵다면 실수를 저질러서 버그가 생길 가능성도 높아진다. (p.26-27)

**프로그램이 새로운 기능을 추가하기에 편한 구조가 아니라면, 먼저 기능을 추가하기 쉬운 형태로 리팩터링하고 나서 원하는
기능을 추가한다.**

**리팩터링하기 전에 제대로 된 테스트부터 마련한다. 테스트는 반드시 자가진단하도록 만든다.**

### 함수 추출하기
- 코드 조각을 찾아 무슨 일을 하는지 파악한 다음, 독립된 함수로 추출하고 목적에 맞는 이름을 붙인다.
- 함수 반환 값에 변수명을 의미있게 붙인다.

※ 주의할 점
- 별도 함수로 빼냈을 때 유효범위를 벗어나는 변수, 즉 새 함수에서는 곧바로 사용할 수 없는 변수가 있는지 확인한다.

**리팩터링은 프로그램 수정을 작은 단계로 나눠 진행한다. 그래서 중간에 실수하더라도 버그르 쉽게 찾을 수 있다.

### 임시 변수를 질의 함수로 바꾸기
- 변수가 단순한 연산 결과라면 그 연산을 수행하는 함수로 만들어 사용한다.

### 변수 인라인하기
- 코드의 라인 수를 줄일 수 있다.
- 변수가 단순한 역할을 하고 있어서 변수 자체가 코드의 의미를 더 분명하게 전달하지 못할 때 사용한다.

### 함수 선언 바꾸기
- 함수의 이름을 바꾸거나, 매개변수를 추가하거나, 제거하거나, 순서를 바꾸거나, 반환값을 바꾸는 등의 작업을 한다.

### 반복문 쪼개기
- 반복문이 너무 길거나, 한 가지 일을 너무 많이 하고 있을 때 사용한다.

### 문장 슬라이드하기
- 변수 초기화 문장을 변수 값 대입 직후로 옮긴다.

### 단계 쪼개기
- 한 함수에서 두 가지 일을 하고 있을 때 사용한다.

### 반복문을 파이프라인으로 바꾸기
- 반복문을 파이프라인으로 바꾸면 코드가 깔끔해지고, 각 단계를 수정하거나 재배치하기 쉬워진다.

### 조건부 로직을 다형성으로 바꾸기
- 조건부 로직을 다형성으로 바꾸면 새로운 타입을 추가하거나 기존 타입을 수정할 때 코드를 수정하기 쉬워진다.

### 함수 옮기기
- 함수가 자신이 속한 모듈보다 다른 모듈의 기능을 더 많이 이용할 때 사용한다.

### 타입 코드를 서브클래스로 바꾸기
- 타입 코드를 서브클래스로 바꾸면 타입 코드에 따라 동작이 달라지는 조건부 로직을 없앨 수 있다.

### 생성자를 팩터리 함수로 바꾸기
- 생성자를 팩터리 함수로 바꾸면 객체를 생성하는 방식을 변경하기 쉬워진다.
